{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="shop-header" style="background-color: var(--secondary-color); padding: 40px 0; margin-bottom: 40px; border-radius: 10px;">
    <div class="container" style="text-align: center;">
        <h1 style="font-size: 36px; color: var(--primary-color); margin-bottom: 10px;">{{ shop.title }}</h1>
        <p style="font-size: 18px; color: var(--text-light); margin-bottom: 5px;"><i class="fas fa-map-marker-alt"></i> {{ shop.city.title }}</p>
        {% if shop.bio %}
            <p style="max-width: 600px; margin: 0 auto; color: var(--text-color);">{{ shop.bio }}</p>
        {% endif %}
    </div>
</section>

<section class="shop-products">
    <div class="section-header">
        <h2 class="section-title">Products from {{ shop.title }}</h2>
    </div>

    {% if products %}
    <div class="product-grid">
        {% for post in products %}
        <div class="product-card">
            <div class="discount-badge">{{ post.discount }}% OFF</div>
            <div class="product-image">
                {% if post.images.first %}
                    <img src="{{ post.images.first.image.url }}" alt="{{ post.title }}">
                {% elif post.image %}
                     <img src="{{ post.image.url }}" alt="{{ post.title }}">
                {% else %}
                    <div style="width:100%; height:100%; background:#eee; display:flex; align-items:center; justify-content:center; color:#999;">No Image</div>
                {% endif %}
            </div>
            <div class="product-info">
                <h3 class="product-title">{{ post.title }}</h3>
                <div class="product-price">
                    ${{ post.price|default:"0.00" }}
                </div>
                <div class="product-action" style="margin-top: 10px;">
                    <a href="{% url 'post_detail' post.pk %}" style="display: block; text-align: center; width: 100%; padding: 8px; background-color: var(--secondary-color); color: var(--text-color); border: 1px solid var(--border-color); border-radius: 5px; text-decoration: none;">
                        View Details
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p style="text-align: center; color: var(--text-light);">No products available in this shop yet.</p>
    {% endif %}
</section>
{% endblock content %}
